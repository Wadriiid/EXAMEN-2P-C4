# ============================================
# SymmetricDS Node Configuration - AMÉRICA
# ============================================
# Nodo Servidor Principal (Root Node)
# Base de datos: PostgreSQL 15

engine.name=america
group.id=america-store
external.id=001

# Conexión a PostgreSQL América
db.driver=org.postgresql.Driver
db.url=jdbc:postgresql://postgres-america:5432/globalshop
db.user=symmetricds
db.password=symmetricds

# Este es el nodo raíz - NO necesita registration.url
registration.url=

# URL de sincronización para este nodo
sync.url=http://symmetricds-america:31415/sync/america

# Configuración HTTP/REST API
http.enable=true
http.port=31415

# Jobs de sincronización habilitados
start.push.job=true
start.pull.job=true
start.route.job=true
start.heartbeat.job=true
start.purge.job=true
start.synctriggers.job=true

# Configuración automática
auto.registration=true
auto.reload=true
auto.sync.triggers=true
auto.sync.triggers.at.startup=true

# Crear tablas sym_* automáticamente
auto.config.database=true

# Tiempos de sincronización (ms)
job.push.period.time.ms=5000
job.pull.period.time.ms=5000
job.routing.period.time.ms=5000
job.purge.period.time.ms=3600000
log.conflict.resolution=true

# Transformación y conflictos
conflict.resolver=manual_newer_wins

# Parámetros de sincronización
transport.max.bytes.to.sync=2097152
transport.timeout.ms=300000

# Modo de sincronización: más agresivo para cambios rápidos
data.loader.batch.commit.size=2000
data.loader.max.failed.number.of.rows=50

# Configuración de inicialización
initial.load.create.first=true
initial.load.use.extract.job=false

# Parámetros de reintentos
registration.number.of.attempts=10
symmetric.sql.error.handling=LOG
